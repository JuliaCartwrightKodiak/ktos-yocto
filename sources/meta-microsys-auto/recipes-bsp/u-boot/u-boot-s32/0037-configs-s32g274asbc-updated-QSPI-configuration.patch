From a12be5ace7819603657d7b4fec6d8d61bf50b765 Mon Sep 17 00:00:00 2001
From: Kay Potthoff <Kay.Potthoff@microsys.de>
Date: Fri, 23 Apr 2021 14:51:51 +0200
Subject: [PATCH 37/38] configs: s32g274asbc: updated QSPI configuration
Organization: MicroSys Electronics GmbH

Updated QSPI configuration.

Signed-off-by: Kay Potthoff <Kay.Potthoff@microsys.de>
---
 configs/s32g274asbc_qspi_defconfig | 55 +++++++++++++++++++++---------
 1 file changed, 38 insertions(+), 17 deletions(-)

diff --git a/configs/s32g274asbc_qspi_defconfig b/configs/s32g274asbc_qspi_defconfig
index 048748b11bb4..2e600a9088ec 100644
--- a/configs/s32g274asbc_qspi_defconfig
+++ b/configs/s32g274asbc_qspi_defconfig
@@ -3,7 +3,6 @@
 # U-Boot 2020.04 Configuration
 #
 CONFIG_CREATE_ARCH_SYMLINK=y
-# CONFIG_FLASH_BOOT is not set
 # CONFIG_ARC is not set
 CONFIG_ARM=y
 # CONFIG_M68K is not set
@@ -168,15 +167,15 @@ CONFIG_NR_DRAM_BANKS=3
 CONFIG_BOOTSTAGE_STASH_ADDR=0
 CONFIG_IDENT_STRING=""
 CONFIG_BAUDRATE=115200
+CONFIG_NXP_S32G2XX=y
 # CONFIG_TARGET_S32V234CCPB is not set
 # CONFIG_TARGET_S32V234EVB is not set
 # CONFIG_TARGET_S32V234PCIE is not set
 # CONFIG_TARGET_MPXS32V234 is not set
 # CONFIG_TARGET_CAMPPS32V2 is not set
 CONFIG_TARGET_S32G274ASBC=y
+# CONFIG_TARGET_S32G274ASBC2 is not set
 # CONFIG_TARGET_S32G274ACPCIS is not set
-# CONFIG_TARGET_S32V344EVB is not set
-# CONFIG_TARGET_S32V344SIM is not set
 # CONFIG_TARGET_S32R45EVB is not set
 # CONFIG_TARGET_S32R45SIM is not set
 # CONFIG_TARGET_S32R45EMU is not set
@@ -189,19 +188,20 @@ CONFIG_TARGET_S32G274ASBC=y
 CONFIG_S32_LPDDR4=y
 # CONFIG_S32_DDR3 is not set
 CONFIG_DDR_HANDSHAKE_AT_RESET=y
+CONFIG_S32_GEN1=y
+CONFIG_EXTRA_KERNEL_BOOT_ARGS=""
 # CONFIG_PHY_RGMII_DIRECT_CONNECTED is not set
+# CONFIG_S32_SKIP_RELOC is not set
 # CONFIG_XEN_SUPPORT is not set
-CONFIG_S32_GEN1=y
+CONFIG_SYS_DATA_BASE=0x34000000
+CONFIG_SYS_MEM_SIZE=0x00800000
+CONFIG_S32GEN1_DRAM_INLINE_ECC=y
 CONFIG_SYS_ERRATUM_ERR050543=y
 CONFIG_UBOOT_SRAM_FOOTPRINT=0x200000
 CONFIG_DTB_SRAM_ADDR=0x34090000
 CONFIG_S32_STANDALONE_BOOT_FLOW=y
 # CONFIG_S32_ATF_BOOT_FLOW is not set
-CONFIG_S32GEN1_HWCONFIG="pcie0:mode=rc,clock=ext;pcie1:mode=sgmii,clock=ext,fmhz=125,xpcs_mode=0"
-CONFIG_SYS_DATA_BASE=0x34000000
-CONFIG_SYS_MEM_SIZE=0x00800000
-CONFIG_EXTRA_KERNEL_BOOT_ARGS=""
-# CONFIG_S32_SKIP_RELOC is not set
+CONFIG_S32GEN1_HWCONFIG="pcie0:mode=rc,clock=ext,fmhz=100;pcie1:mode=sgmii,clock=ext,fmhz=125,xpcs_mode=both"
 CONFIG_SYS_DDR_SIZE=0x10000000

 #
@@ -497,10 +497,12 @@ CONFIG_CMD_LOADS=y
 CONFIG_CMD_MMC=y
 # CONFIG_CMD_MMC_RPMB is not set
 # CONFIG_CMD_MMC_SWRITE is not set
+# CONFIG_CMD_MTD is not set
+# CONFIG_CMD_ONENAND is not set
 # CONFIG_CMD_OSD is not set
 CONFIG_CMD_PART=y
 CONFIG_CMD_PCI=y
-# CONFIG_CMD_PINMUX is not set
+CONFIG_CMD_PINMUX=y
 # CONFIG_CMD_POWEROFF is not set
 # CONFIG_CMD_READ is not set
 # CONFIG_CMD_SATA is not set
@@ -616,6 +618,7 @@ CONFIG_CMD_FAT=y
 CONFIG_CMD_FS_GENERIC=y
 # CONFIG_CMD_FS_UUID is not set
 # CONFIG_CMD_JFFS2 is not set
+# CONFIG_CMD_MTDPARTS is not set
 CONFIG_MTDIDS_DEFAULT=""
 CONFIG_MTDPARTS_DEFAULT=""
 # CONFIG_CMD_REISER is not set
@@ -814,6 +817,7 @@ CONFIG_ARM_PSCI_FW=y
 # CONFIG_CMD_PCA953X is not set
 # CONFIG_PCF8575_GPIO is not set
 # CONFIG_ROCKCHIP_GPIO is not set
+CONFIG_S32_GPIO=y
 # CONFIG_XILINX_GPIO is not set
 # CONFIG_CMD_TCA642X is not set
 # CONFIG_TEGRA_GPIO is not set
@@ -922,9 +926,9 @@ CONFIG_MMC_HW_PARTITIONING=y
 # CONFIG_SPL_MMC_IO_VOLTAGE is not set
 # CONFIG_MMC_HS400_ES_SUPPORT is not set
 # CONFIG_SPL_MMC_HS400_ES_SUPPORT is not set
-# CONFIG_MMC_HS400_SUPPORT is not set
+CONFIG_MMC_HS400_SUPPORT=y
 # CONFIG_SPL_MMC_HS400_SUPPORT is not set
-# CONFIG_MMC_HS200_SUPPORT is not set
+CONFIG_MMC_HS200_SUPPORT=y
 # CONFIG_SPL_MMC_HS200_SUPPORT is not set
 CONFIG_MMC_VERBOSE=y
 # CONFIG_MMC_TRACE is not set
@@ -942,11 +946,14 @@ CONFIG_FSL_USDHC=y
 #
 # MTD Support
 #
-# CONFIG_MTD is not set
-# CONFIG_DM_MTD is not set
+CONFIG_MTD=y
+CONFIG_DM_MTD=y
 # CONFIG_MTD_NOR_FLASH is not set
 # CONFIG_FLASH_CFI_DRIVER is not set
+# CONFIG_CFI_FLASH is not set
+# CONFIG_ALTERA_QSPI is not set
 # CONFIG_MTD_RAW_NAND is not set
+# CONFIG_MTD_SPI_NAND is not set

 #
 # SPI Flash Support
@@ -972,6 +979,7 @@ CONFIG_SPI_FLASH_STMICRO=y
 # CONFIG_SPI_FLASH_XMC is not set
 CONFIG_SPI_FLASH_USE_4K_SECTORS=y
 # CONFIG_SPI_FLASH_DATAFLASH is not set
+# CONFIG_SPI_FLASH_MTD is not set
 # CONFIG_SPL_SPI_FLASH_MTD is not set

 #
@@ -1015,7 +1023,7 @@ CONFIG_FSL_PFENG=y
 CONFIG_FSL_PFENG_FW_LOC_SDCARD=y
 # CONFIG_FSL_PFENG_FW_LOC_QSPI is not set
 CONFIG_FSL_PFENG_FW_NAME="s32g_pfe_class.fw"
-CONFIG_FSL_PFENG_FW_PART="qspi@6:0:0x200000"
+CONFIG_FSL_PFENG_FW_PART="0:1"
 # CONFIG_FSL_PFENG_EMAC_0_RGMII is not set
 # CONFIG_FSL_PFENG_EMAC_1_RGMII is not set
 CONFIG_PHY_GIGE=y
@@ -1084,13 +1092,26 @@ CONFIG_SERDES_S32GEN1=y
 CONFIG_PHY=y
 # CONFIG_NOP_PHY is not set
 # CONFIG_MSM8916_USB_PHY is not set
-# CONFIG_SAF1508BET_USB_PHY is not set
+CONFIG_SAF1508BET_USB_PHY=y
 # CONFIG_MVEBU_COMPHY_SUPPORT is not set

 #
 # Pin controllers
 #
-# CONFIG_PINCTRL is not set
+CONFIG_PINCTRL=y
+CONFIG_PINCTRL_FULL=y
+CONFIG_PINCTRL_GENERIC=y
+CONFIG_PINMUX=y
+# CONFIG_PINCONF is not set
+CONFIG_PINCONF_RECURSIVE=y
+# CONFIG_PINCTRL_AT91 is not set
+# CONFIG_PINCTRL_AT91PIO4 is not set
+# CONFIG_PINCTRL_INTEL is not set
+# CONFIG_PINCTRL_ROCKCHIP_RV1108 is not set
+# CONFIG_PINCTRL_SINGLE is not set
+# CONFIG_PINCTRL_STM32 is not set
+# CONFIG_PINCTRL_STMFX is not set
+CONFIG_PINCTRL_S32=y

 #
 # Power
--
2.30.2

